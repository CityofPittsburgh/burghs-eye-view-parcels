.libPaths("C:/util")
library(rgdal)
install.packages("rgdal")
library(purrr)
.libPaths("C:/util")
install.packages(c("gpclib", "maptools", "plyr", "rgdal", "rgeos", "shiny", "shinythemes", "sp"))
.libPaths("C:/util")
.libPaths("C:/util")
url.exist("http://photos.county.allegheny.pa.us/iasworld/iDoc2/Services/GetPhoto.ashx?parid=0083P00167000000&jur=002&Rank=1&size=350x263")
url.exists("http://photos.county.allegheny.pa.us/iasworld/iDoc2/Services/GetPhoto.ashx?parid=0083P00167000000&jur=002&Rank=1&size=350x263")
library(RCurl)
.libPaths("C:/util")
library(RCurl)
getBinaryURL("http://photos.county.allegheny.pa.us/iasworld/iDoc2/Services/GetPhoto.ashx?parid=0083P00167000000&jur=002&Rank=1&size=350x263")
getBinaryURL("http://photos.county.allegheny.pa.us/iasworld/iDoc2/Services/GetPhoto.ashx?parid=0083P00167000000&jur=002&Rank=1&size=350x263", failonerror = TRUE)
library(httr)
test <- GET("http://photos.county.allegheny.pa.us/iasworld/iDoc2/Services/GetPhoto.ashx?parid=0083P00167000000&jur=002&Rank=1&size=350x263")
content(test)
test <- GET("http://photos.county.allegheny.pa.us/iasworld/iDoc2/Services/GetPhoto.ashx?parid=0083L00284000000&jur=002&Rank=1&size=350x263")
content(test)
test2 <- GET("http://photos.county.allegheny.pa.us/iasworld/iDoc2/Services/GetPhoto.ashx?parid=0083L00284000000&jur=002&Rank=1&size=350x263")
test <- GET("http://photos.county.allegheny.pa.us/iasworld/iDoc2/Services/GetPhoto.ashx?parid=0083L00284000000&jur=002&Rank=1&size=350x263")
test <- GET("http://photos.county.allegheny.pa.us/iasworld/iDoc2/Services/GetPhoto.ashx?parid=0083P00167000000&jur=002&Rank=1&size=350x263")
content(test)
test$status_code
test2$status_code
.libPaths("C:/util")
setwd("~/GitHub/burghs-eye-view-parcels")
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
library(R4CouchDB)
runApp()
library(stringi)
runApp()
runApp()
.libPaths("C:/util")
shiny::runApp()
runApp()
runApp()
couchdb_url <- jsonlite::fromJSON("key.json")$couchdb_url
runApp()
rsconnect::deployApp(appDir = "C:/Users/arnoldg/Documents/GitHub/burghs-eye-view-parcels",      account = "pittsburghpa", server = "shinyapps.io", appName = "Burghs_iViewParcels", appTitle = "Burghs_iViewParcels", launch.browser = function(url) {         message("Deployment completed: ", url)     }, lint = FALSE, metadata = list(asMultiple = FALSE, asStatic = FALSE,          ignoredFiles = "README.md"), logLevel = "verbose")
rsconnect::showLogs("Burghs_iViewParcels")
rsconnect::showLogs(appName = "Burghs_iViewParcels")
rsconnect::showLogs(appName = "Burghs_iViewParcels", streaming = T)
rsconnect::deployApp(appDir = "C:/Users/arnoldg/Documents/GitHub/burghs-eye-view-parcels",      account = "pittsburghpa", server = "shinyapps.io", appName = "BurghsEyeViewParcels", appTitle = "BurghsEyeViewParcels", launch.browser = function(url) {         message("Deployment completed: ", url)     }, lint = FALSE, metadata = list(asMultiple = FALSE, asStatic = FALSE,          ignoredFiles = "README.md"), logLevel = "verbose")
shiny::runApp()
install.packages("chron")
require(chron)
is.holiday()
is.holiday(Sys.Date())
chron::.Holidays
presidential_year <- seq(this_year:2050, 4)
presidential_year <- seq(this_year, 2050, 4)
# this_year
this_year <- format(Sys.Date(), format="%Y")
presidential_year <- seq(as.numermic(this_year), 2050, 4)
presidential_year <- seq(as.numremic(this_year), 2050, 4)
presidential_year <- seq(as.numeric(this_year), 2050, 4)
presidential_years <- seq(as.numeric(this_year), 2050, 4)
presidential_years <- seq(2020, 2050, 4)
presidential_year <- if(this_year %in% presidential_years)
presidential_year <- ifelse(this_year %in% presidential_years)
presidential_year <- this_year %in% presidential_years
apr <- ymd(as.Date(paste0(this_year, "-04-01")))
may <- ymd(as.Date(paste0(this_year, "-05-01")))
dow <- sapply(seq(0,6),function(x) wday(nov+days(x)))
apr <- ymd(as.Date(paste0(this_year, "-04-01")))
dow <- sapply(seq(0,6),function(x) wday(apr+days(x)))
apr <- ymd(as.Date(paste0(this_year, "-04-01")))
dow <- sapply(seq(0,6),function(x) wday(apr+days(x)))
library(shiny)
library(shinythemes)
#"Dogfooding" Packages
library(httr)
library(jsonlite)
library(R4CouchDB)
# Visuals Libraries
library(leaflet)
library(rgdal)
library(DT)
library(sp)
# Data Transform
library(plyr)
library(dplyr)
library(stringi)
library(lubridate)
may <- ymd(as.Date(paste0(this_year, "-05-01")))
dow <- sapply(seq(0,6),function(x) wday(may+days(x)))
# Election Day
nov <- ymd(as.Date(paste0(this_year, "-11-01")))
dow <- sapply(seq(0,6),function(x) wday(nov+days(x)))
setwd("C:/Users/arnoldg/Documents/GitHub/burghs-eye-view-parcels")
library(shiny)
library(shinythemes)
#"Dogfooding" Packages
library(httr)
library(jsonlite)
library(R4CouchDB)
# Visuals Libraries
library(leaflet)
library(rgdal)
library(DT)
library(sp)
# Data Transform
library(plyr)
library(dplyr)
library(stringi)
library(lubridate)
apr <- ymd(as.Date(paste0(this_year, "-04-01")))
dow <- sapply(seq(0,6),function(x) wday(apr+days(x)))
pDay <- nov + days(which(dow==2))
days(which(dow==2))
nov + days(which(dow==2))
which(dow==2)
dow <- sapply(seq(0,30),function(x) wday(apr+days(x)))
which(dow==2)
days <- which(dow==2)[3]
pDay <- apr + days(which(dow==2)[3])
dow <- sapply(seq(0,30),function(x) wday(apr+days(x)))
dow <- sapply(seq(0,31),function(x) wday(apr+days(x)))
pDay <- apr + days(which(dow==2)[4])
if (this_year %in% presidential_years) {
apr <- ymd(as.Date(paste0(this_year, "-04-01")))
dow <- sapply(seq(0,31),function(x) wday(apr+days(x)))
pDay <- apr + days(which(dow==2)[4])
} else {
may <- ymd(as.Date(paste0(this_year, "-05-01")))
dow <- sapply(seq(0,6),function(x) wday(may+days(x)))
pDay <- may + days(which(dow==2)[3])
}
pDay <- may + days(which(dow==2)[3])
may <- ymd(as.Date(paste0(this_year, "-05-01")))
dow <- sapply(seq(0,6),function(x) wday(may+days(x)))
pDay <- may + days(which(dow==2)[3])
dow <- sapply(seq(0,31),function(x) wday(may+days(x)))
pDay <- may + days(which(dow==2)[3])
# Check if Presidential Year for Primary
if (this_year %in% presidential_years) {
apr <- ymd(as.Date(paste0(this_year, "-04-01")))
dow <- sapply(seq(0,31),function(x) wday(apr+days(x)))
pDay <- apr + days(which(dow==2)[4])
} else {
may <- ymd(as.Date(paste0(this_year, "-05-01")))
dow <- sapply(seq(0,31),function(x) wday(may+days(x)))
pDay <- may + days(which(dow==2)[3])
}
eDay <- nov + days(which(dow==1) + 1)
# Election Day
nov <- ymd(as.Date(paste0(this_year, "-11-01")))
dow <- sapply(seq(0,6),function(x) wday(nov+days(x)))
eDay <- nov + days(which(dow==1) + 1)
eDay <- nov + days(which(dow==1))
days(which(dow==1))
eDay <- nov + days(which(dow==1))
days(which(dow==1))
nov + days(which(dow==1))
eDay <- nov + days(which(dow==1)) + 1
pDay <- may + days(which(dow==2)[3])
dow <- sapply(seq(0,31),function(x) wday(may+days(x)))
pDay <- may + days(which(dow==2)[3])
pDay <- may + days(which(dow==2)[2])
dow <- sapply(seq(0,31),function(x) wday(may+days(x)))
pDay <- may + days(which(dow==2)[2])
may <- ymd(as.Date(paste0(this_year, "-05-01")))
dow <- sapply(seq(0,31),function(x) wday(may+days(x)))
pDay <- may + days(which(dow==2)[3])
days(which(dow==2)[3])
which(dow==2)
pDay <- may + which(dow==2)[3]
dow <- sapply(seq(0,31),function(x) wday(may+days(x)))
may
dow
wday(may)
eDay <- nov + days(which(dow==0)) + 1
dow <- sapply(seq(0,6),function(x) wday(nov+days(x)))
eDay <- nov + days(which(dow==0)) + 1
eDay <- nov + days(which(dow==2)) + 1
pDay <- may + which(dow==2)[3]
eDay <- nov + days(which(dow==1)) + 1
eDay <- nov + days(which(dow==1)) + 1
pDay <- may + days(which(dow==2)[2])
dow <- sapply(seq(0,31),function(x) wday(may+days(x)))
pDay <- may + days(which(dow==2)[2])
ymd(as.Date(paste0(this_year, "-05-01")))
wday(may+days(x)))
sapply(seq(0,31),function(x) wday(may+days(x)))
pDay <- may + days(which(dow==3)[3])
pDay <- may + days(which(dow==2)[3])
wday(may+days(0))
wday(may)
pDay <- may + days(which(dow==3)[3])
pDay <- may + days(which(dow==2)[3])
wday("2018-05-01")
lubridate.week.start
x <- as.Date("2009-09-02")
wday(x) #4
may <- ymd(as.Date(paste0(this_year, "-05-01")))
may <- as.Date(paste0(this_year, "-05-01"))
apr <- as.Date(paste0(this_year, "-04-01"))
wday(apr)
may <- as.Date(paste0(this_year, "-05-01"))
dow <- sapply(seq(0,31),function(x) wday(may+days(x)))
pDay <- may + days(which(dow==3)[3])
pDay <- apr + days(which(dow==2)[4])
which(dow==2)[4]
pDay <- apr + which(dow==2)[4]
pDay <- apr + which(dow==2)[4] - 1
pDay <- apr + which(dow==2)[4] - 1
apr <- as.Date(paste0(this_year, "-04-01"))
dow <- sapply(seq(0,31),function(x) wday(apr+days(x)))
pDay <- apr + which(dow==2)[4] - 1
which(dow==2)[4]
pDay <- apr + which(dow==2)[4]
may <- as.Date(paste0(this_year, "-05-01"))
dow <- sapply(seq(0,31),function(x) wday(may+days(x)))
pDay <- may + which(dow==2)[3]
# Check if Presidential Year for Primary
if (this_year %in% presidential_years) {
apr <- as.Date(paste0(this_year, "-04-01"))
dow <- sapply(seq(0,31),function(x) wday(apr+days(x)))
pDay <- apr + which(dow==2)[4]
} else {
may <- as.Date(paste0(this_year, "-05-01"))
dow <- sapply(seq(0,31),function(x) wday(may+days(x)))
pDay <- may + which(dow==2)[3]
}
which(dow==2)[4]
which(dow==2)
dow <- sapply(seq(0,31),function(x) wday(may+days(x)))
which(dow==2)
may <- as.Date(paste0(this_year, "-05-01"))
dow <- sapply(seq(0,31),function(x) wday(may+days(x)))
sapply(seq(0,31),function(x) wday(may+days(x)))
dow <- sapply(seq(0,31),function(x) wday(may+x))
dow
wday(may)
dow <- sapply(seq(0,31),function(x) wday(may+x,week_start = getOption("lubridate.week.start", 7)))
dow
this_year
as.Date(paste0(this_year, "-05-01"))
wday(may)
format(may, "%d")
format(may, "%a")
dow <- sapply(seq(0,31),function(x) format(may+x), "%d")
dow <- sapply(seq(0,31),function(x) format(may+x, "%d"))
dow <- sapply(seq(0,31),function(x) format(may+x, "%a"))
pDay <- may + which(dow=="Tue")[3]
pDay <- may + which(dow=="Tue")[3] -1
dow <- sapply(seq(0,31),function(x) format(apr+x, "%a"))
pDay <- apr + which(dow=="Tue")[4] -1
pDay <- may + which(dow=="Mon")[1]
pDay <- may + which(dow=="Mon")[1]
load.egg <- ckanSQL("https://data.wprdc.org/api/action/datastore_search_sql?sql=SELECT%20*%20FROM%20%2251efa73c-d4b8-4ac0-b65a-9c9b1f904372%22MuniName%20=%20%22PITTSBURGH%22")
# Query Using SQL
ckanSQL <- function(url) {
r <- GET(url, timeout(600))
c <- content(r, "text")
json <- gsub('NaN', '""', c, perl = TRUE)
data.frame(jsonlite::fromJSON(json)$result$records)
}
load.egg <- ckanSQL("https://data.wprdc.org/api/action/datastore_search_sql?sql=SELECT%20*%20FROM%20%2251efa73c-d4b8-4ac0-b65a-9c9b1f904372%22MuniName%20=%20%22PITTSBURGH%22")
load.egg <- ckanSQL("https://data.wprdc.org/api/action/datastore_search_sql?sql=SELECT%20*%20FROM%20%2251efa73c-d4b8-4ac0-b65a-9c9b1f904372%22%20WHERE%22MuniName%22%20=%20%22PITTSBURGH%22")
load.egg <- ckanSQL("https://data.wprdc.org/api/action/datastore_search_sql?sql=SELECT%20*%20FROM%20%2251efa73c-d4b8-4ac0-b65a-9c9b1f904372%22%20WHERE%22MuniName%22%20=%20%27PITTSBURGH%27")
dow <- sapply(seq(0,31),function(x) format(may+x, "%a"))
pDay <- may + which(dow=="Tue")[3] - 1
if (this_year %in% presidential_years) {
apr <- as.Date(paste0(this_year, "-04-01"))
dow <- sapply(seq(0,31),function(x) format(apr+x, "%a"))
pDay <- apr + which(dow=="Tue")[4] - 1
} else {
may <- as.Date(paste0(this_year, "-05-01"))
dow <- sapply(seq(0,31),function(x) format(may+x, "%a"))
pDay <- may + which(dow=="Tue")[3] - 1
}
Sys.Date() == eDay | Sys.Date() == pDay
runApp('C:/Users/arnoldg/Documents/GitHub/burghs-eye-view-steps')
runApp('C:/Users/arnoldg/Documents/GitHub/burghs-eye-view-places')
runApp('C:/Users/arnoldg/Documents/GitHub/burghs-eye-view-places')
runApp('C:/Users/arnoldg/Documents/GitHub/burghs-eye-view-places')
runApp('C:/Users/arnoldg/Documents/GitHub/burghs-eye-view-places')
runApp('C:/Users/arnoldg/Documents/GitHub/burghs-eye-view-places')
runApp('C:/Users/arnoldg/Documents/GitHub/burghs-eye-view-places')
runApp('C:/Users/arnoldg/Documents/GitHub/burghs-eye-view-places')
runApp('C:/Users/arnoldg/Documents/GitHub/burghs-eye-view-places')
